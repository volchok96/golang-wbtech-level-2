Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и их порядок вызовов.

```go
package main

import (
	"fmt"
)


func test() (x int) {
	defer func() {
		x++
	}()
	x = 1
	return
}


func anotherTest() int {
	var x int
	defer func() {
		x++
	}()
	x = 1
	return x
}


func main() {
	fmt.Println(test())
	fmt.Println(anotherTest())
}
```

Ответ:
```
2
1
```

### Обьяснение:

**Функция test**

1. В функции test объявлена переменная x типа int.
2. С помощью defer зарегистрирована анонимная функция, которая увеличивает значение x на 1.
3. Переменной x присваивается значение 1.
4. Когда функция test достигает оператора return, она сначала сохраняет текущее значение x (которое равно 1) для возврата.
5. Затем выполняется отложенная функция, которая увеличивает значение x на 1, так что x становится равным 2.
6. Возвращается значение x, которое было сохранено до выполнения отложенной функции, то есть 2.

**Функция anotherTest**

1. В функции anotherTest объявлена переменная x типа int.
2. С помощью defer зарегистрирована анонимная функция, которая увеличивает значение x на 1.
3. Переменной x присваивается значение 1.
4. Когда функция anotherTest достигает оператора return, она сначала сохраняет текущее значение x (которое равно 1) для возврата.
5. Затем выполняется отложенная функция, которая увеличивает значение x на 1, так что x становится равным 2.
6. Однако, в отличие от функции test, здесь возвращается значение x, которое было сохранено до выполнения отложенной функции, то есть 1.

**Основное отличие** между функциями test и anotherTest заключается в том, как они обрабатывают именованные возвращаемые параметры. В функции test переменная x объявлена как именованный возвращаемый параметр, что означает, что её значение будет изменено отложенной функцией перед фактическим возвратом, и это измененное значение (2) будет возвращено. В функции anotherTest переменная x объявлена локально, и её значение сохраняется для возврата до выполнения отложенной функции, которая не изменяет это сохраненное значение, поэтому возвращается исходное значение (1).

**Объяснение работы defer**

defer в Go используется для отложенного выполнения функции. Когда defer вызывается, он регистрирует функцию для выполнения, но не выполняет её сразу. Вместо этого функция выполняется непосредственно перед тем, как функция, в которой был вызван defer, завершит своё выполнение.

Если в функции есть несколько defer, они выполняются в порядке LIFO (Last In, First Out), то есть последний зарегистрированный defer выполняется первым.